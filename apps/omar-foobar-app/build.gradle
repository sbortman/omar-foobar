plugins {
  id 'com.google.cloud.tools.jib' 
}


dependencies {
    implementation project( ":${ rootProject.name }-plugin" )
}

assets {
    minifyJs = true
    minifyCss = true
}

jib {
    from {
        image = "${jibFromRepo}/${jibFromImage}:${jibFromVersion}"
    }
    to {
        image = "${jibToRepo}/${project.name}" 
        tags = [ 'latest' ]
    }
    containerizingMode = 'packaged'
    container {
        // appRoot = '/home/omar'        
        user = 'omar'
        ports = [ '8080' ]
        creationTime = 'USE_CURRENT_TIMESTAMP'
    }
    extraDirectories {
        permissions = [
            '/home/omar': '777'
        ]
    }
}